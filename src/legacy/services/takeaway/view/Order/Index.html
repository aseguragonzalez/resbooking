<!DOCTYPE html>
<html lang="es">

    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{Title}</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="{Resources}/content/css/bootstrap.min.css" rel="stylesheet" media="screen" />
        <link href="{Resources}/content/css/bootstrap-theme.min.css" rel="stylesheet" media="screen" />
        <link href="{Resources}/content/css/jquery-ui-1.8.4.custom.css" rel="stylesheet" />
        <link rel="stylesheet" href="{Resources}/content/css/order-theme.css" />
        <!--[if lt IE 9]>
          <script src="{Resources}/js/libs/html5shiv.js"></script>
          <script src="{Resources}/js/libs/respond.min.js"></script>
        <![endif]-->
        <script type="text/javascript" src="{Resources}/js/libs/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="{Resources}/js/libs/jquery-ui-1.10.3.min.js"></script>
        <script type="text/javascript" src="{Resources}/js/libs/bootstrap.min.js" ></script>
        <script type="text/javascript" src="{Resources}/js/plugins/datepicker-es.js"></script>
        <script type="text/javascript" src="{Resources}/js/libs/json2.js"></script>
    </head>

    <body>

        <header id="header">
            <nav class="navbar">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <img src="{Resources}/content/logos/logo_{Project}.png"
                             class="img-responsive"/>
                        <span>Takeaway</span>
                    </div>
                </div>
            </nav>
        </header>

        <section id="landing" class="screen" >
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4 col-sm-offset-3 col-md-offset-4">

                        <div class="form-group {eDeliveryMethodsClass}">
                            <h4>¿Cómo quieres que sea la entrega?</h4>
                            <div class="btn-group" role="group" aria-label="Entrega">
                                <!--DeliveryMethods-->
                                <button type="button" class="btn btn-default"
                                        data-delivery="{item.Id}"
                                        onclick="setDelivery(this)" >{item.Name}</button>
                                <!--DeliveryMethods-->
                            </div>
                            <p class="help-block">
                                Selecciona uno de los métodos de entrega
                                que te proponemos. {eDeliveryMethods}
                            </p>
                        </div>

                        <div id="cod-post" class="hide">

                            <!-- Código Postal -->
                            <div class="form-group {ePostCodeClass}">
                                <label>¿Cuál es tu código postal?</label>
                                <input type="text" id="postCode" class="form-control"
                                       value="{Entity.PostCode}"
                                       placeholder="Código Postal"
                                       onchange="updatePostCode(this);"
                                       onblur="updatePostCode(this);"
                                       data-codes='{JSONPostCodes}'/>
                                <p id="ePostCode" class="help-block"
                                   data-msg="Introduce tu código postal."
                                   data-err="Lo sentimos pero el código postal introducido está fuera del área de reparto">
                                    Introduce tu código postal. {ePostCode}
                                </p>
                            </div>

                            <!-- Dirección -->
                            <div class="form-group {eAddressClass}">
                                <label>¿Cuál es tu dirección?</label>
                                <textarea id="address" class="form-control"
                                          required="required" maxlength="500"
                                          data-value="{Entity.Address}"
                                          onblur="updateAddress(this)"
                                          onchange="updateAddress(this)"
                                          rows="2">{Entity.Address}</textarea>
                                <p id="eAddress" class="help-block"
                                   data-msg="Indícanos la dirección donde entregar tu pedido."
                                   data-err="Debe indicar una dirección de entrega">
                                    Indícanos la dirección donde entregar
                                    tu pedido. {eAddress}
                                </p>

                            </div>

                            <!-- Next -->
                            <button type="button" class="btn btn-default"
                                    onclick="nextStep($('#postCode'))">Continuar</button>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <section id="catalogo" class="screen hide">
            <div class="container">
                <div class="row">
                    <!-- navegación -->
                    <div id="navegacion" class="col-xs-12 col-sm-4 col-md-2 col-lg-2">

                        <div class="categories-discounts">

                            <div class="panel panel-default">
                                <div class="panel-heading">Categorías</div>
                                <div class="panel-body">
                                    <ul class="menu-categorias">
                                        <!--SubMenuCategories-->
                                        <li>
                                            <a href="#cat_{item.Id}">{item.Name}</a>
                                        </li>
                                        <!--SubMenuCategories-->
                                    </ul>
                                </div>
                            </div>

                            <div class="panel panel-default">
                                <div class="panel-heading">Descuentos</div>
                                <div class="panel-body">
                                    <ul class="menu-categorias">
                                        <!--DiscountsInfo-->
                                        <li>
                                           {item.Value} % <br/>
                                           <small>Por compras superiores a {item.Min} €</small>
                                        </li>
                                        <!--DiscountsInfo-->
                                    </ul>
                                </div>
                            </div>

                        </div>

                    </div>

                    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
                        <!--Categories-->
                        <div id="cat_{item.Id}" class="table-responsive">
                            <table class="table table-striped table-takeaway">
                                <thead>
                                    <tr>
                                        <th class="hide"></th>
                                        <th colspan="2">
                                            <h4>{item.Name}</h4>
                                        </th>
                                        <th>Precio</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!--Products{item.Id}-->
                                    <tr>
                                        <td class="hide">{item.Reference}</td>
                                        <td>{item.PName}</td>
                                        <td>{item.PDesc}</td>
                                        <td>{item.Price} €/ud</td>
                                        <td>
                                            <a class="btn btn-default btn-xs"
                                               title="Añadir"
                                               id="btn_add_{item.PId}"
                                               onclick="addProduct(this)"
                                               data-id="{item.PId}"
                                               data-ref="{item.Reference}"
                                               data-desc="{item.PDesc}"
                                               data-price="{item.PPrice}"
                                               data-name="{item.PName}">
                                                <span class="glyphicon glyphicon-plus"></span>
                                            </a>
                                            <a class="btn btn-default btn-xs"
                                               title="Añadir"
                                               onclick="removeProduct(this)"
                                               data-id="{item.PId}"
                                               data-ref="{item.Reference}">
                                                <span class="glyphicon glyphicon-minus"></span>
                                            </a>
                                        </td>
                                    </tr>
                                    <!--Products{item.Id}-->
                                </tbody>
                            </table>
                        </div>
                        <!--Categories-->
                    </div>

                    <div id="carrito" class="col-xs-12 col-sm-4 col-md-2 col-lg-2">
                        <!-- tu pedido -->
                        <div class="panel panel-default">
                            <div class="panel-heading">Tu Pedido</div>
                            <div class="panel-body">
                                <ul id="detalles" data-msg="Tu pedido está vacío">
                                    <li class="empty">Tu pedido está vacío</li>
                                </ul>
                                <hr />
                                <p id="resultado">
                                    Total <span id="total" data-value="0">0</span> €
                                    <span id="desc" data-value="0" data-text=""></span>
                                </p>
                                <hr/>
                                <p>
                                    <button class="btn btn-default"
                                    type="button"
                                    onclick="openCatalog()">Atras</button>
                                    <a id="open-confirm"
                                       class="btn btn-primary"
                                       onclick="setDetails(this);openForm();"
                                       data-toggle="modal"
                                       data-target="#dialogo-pedido">Confirmar</a>
                                </p>

                                <ul class="hide">
                                    <!--Discounts-->
                                    <li data-id="{item.Id}"
                                        data-min="{item.Min}"
                                        data-max="{item.Max}"
                                        data-value="{item.Value}"
                                        class="discount">{item.Value} %</li>
                                    <!--Discounts-->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="formulario" class="screen hide">
            <form action="{Path}/Order/Send/{Project}" class="container" method="POST"
                  onsubmit="return onSubmit(this);">
                <input type="hidden" id="error" value="{Error}" />
                <input type="hidden" name="Discount" value="" />
                <input type="hidden" id="Items" name="Items" value='{Entity.Items}' />
                <input type="hidden" name="PostCode" value="{Entity.PostCode}" />
                <input type="hidden" name="Address" value="{Entity.Address}" />
                <input type="hidden" name="DeliveryMethod" value="{Entity.DeliveryMethod}" />

                <div class="row">

                    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">

                        <h2>Datos del pedido</h2>

                        <!-- Nombre y Apellidos -->
                        <div class="form-group {eNameClass}">
                            <label class="sr-only">Nombre y Apellidos</label>
                            <input type="text"
                                   name="Name"
                                   required="required"
                                   maxlength="100"
                                   placeholder="¿Cuál es tu nombre y apellidos?"
                                   value="{Entity.Name}"
                                   class="form-control" />
                            <p class="help-block">
                                Indica un nombre para asociar al pedido.{eName}
                            </p>
                        </div>

                        <!-- Teléfono -->
                        <div class="form-group {ePhoneClass}">
                            <label class="sr-only">Teléfono</label>
                            <input type="text"
                                   name="Phone"
                                   required="required"
                                   maxlength="10"
                                   placeholder="¿Teléfono de contacto?"
                                   value="{Entity.Phone}"
                                   class="form-control" />
                            <p class="help-block">
                                Necesitamos un teléfono de contacto. {ePhone}
                            </p>
                        </div>

                        <!-- Email -->
                        <div class="form-group {eEmailClass}">
                            <label class="sr-only">Email</label>
                            <input type="email"
                                   name="Email"
                                   required="required"
                                   maxlength="100"
                                   placeholder="¿Cuál es tu e-mail?"
                                   value="{Entity.Email}"
                                   class="form-control" />
                            <p class="help-block">
                                Introduce un e-mail válido. {eEmail}
                            </p>
                        </div>

                        <!-- Hora de entrega -->
                        <div class="form-group {eDeliveryTimeClass}">
                            <label class="sr-only">Hora de entrega</label>
                            <select name="DeliveryTime"
                                    required="required"
                                    data-value="{Entity.DeliveryTime}"
                                    data-selected="{Entity.DeliveryTime}"
                                    class="form-control" >
                                <option value="-1">Seleccione una hora de entrega</option>
                                <!--HoursOfDay-->
                                <option value="{item.Id}">{item.Text}</option>
                                <!--HoursOfDay-->
                            </select>
                            <p class="help-block">
                                ¿A qué hora desea la entrega? {eDeliveryTime}
                            </p>
                        </div>

                        <!-- Forma de pago -->
                        <div class="form-group {ePaymentMethodClass}">
                            <label class="sr-only">Forma de pago</label>
                            <select name="PaymentMethod"
                                    required="required"
                                    placeholder="¿Cómo vas a pagar?"
                                    data-value="{Entity.PaymentMethod}"
                                    data-selected="{Entity.PaymentMethod}"
                                    class="form-control" >
                                <option value="-1">Seleccione una forma de pago</option>
                                <!--PaymentMethods-->
                                <option value="{item.Id}">{item.Name}</option>
                                <!--PaymentMethods-->
                            </select>
                            <p class="help-block">
                                ¿Cómo realizará el pago? {ePaymentMethod}
                            </p>
                        </div>

                    </div>

                    <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">

                        <h2>Detalles</h2>

                        <div class="form-group">
                            <table id="detalles-pedido" class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Referencia</th>
                                        <th>Producto</th>
                                        <th>Cantidad</th>
                                        <th>Precio</th>
                                    </tr>
                                </thead>
                                <tbody>

                                </tbody>
                                <tfoot>

                                </tfoot>
                            </table>
                        </div>

                    </div>

                </div>

                <div class="row">

                    <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
                        <!-- Condiciones del servicio -->
                        <div class="form-group">
                            <small>
                                <span id="terms">
                                    <label class="rb-service-conditions">
                                        <input type="checkbox"
                                               name="Terminos"
                                               checked="checked"
                                               onclick="$('#confirm').prop('disabled', !$(this).is(':checked'))"
                                               id="Terminos" />
                                        He leído y acepto los </label>
                                    <a href="#" data-toggle="modal" data-target="#myModal">
                                        términos y condiciones del servicio.
                                    </a>
                                </span>
                                <br />
                                <label class="rb-service-conditions">
                                    <input type="checkbox" name="Advertising" checked="checked" />
                                        Deseo estar informado de los descuentos
                                        y promociones.
                                </label>
                            </small>
                        </div>

                        <!-- Control aceptar -->
                        <div class="form-group">

                            <button class="btn btn-default"
                                    type="button"
                                    onclick="openForm()">Atras</button>

                            <button class="btn btn-primary"
                                    type="submit"
                                    id="confirm"
                                    onclick="return $('#Terminos').is(':checked');" >
                                Confirmar</button>
                        </div>

                        <!-- Resultado de la validación -->
                        <div class="form-group {eResultClass}">
                            <p class="help-block">{eResult}</p>
                        </div>
                    </div>

                </div>

            </form>
        </section>

        <footer id="page-footer">
            <div class="container">
                <p>
                    Lorem ipsum ad his scripta blandit partiendo,
                    eum fastidii accumsan euripidis in, eum liber
                    hendrerit an.  <a href="#">Aquí</a>
                </p>
            </div>
        </footer>

        <input type="hidden" id="error" value="{Error}" />

        <script type="text/javascript" src="{Resources}/js/order.js"></script>

    </body>
</html>
